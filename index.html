<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Indonesia KTP Generator</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="preload" href="ocraextended.ttf" as="font" type="font/ttf" crossorigin>
<script src="./data.js"></script>
<style>
:root {
  --panel-bg: rgba(255,255,255,.92);
  --accent:#1d86a4;
  --radius:14px;
  --shadow:0 6px 24px -4px rgba(0,0,0,.25);
  --max-card-width:600px;
    --color-scheme: light;
}
body, input, .nik { color:#101010 !important; text-shadow:none !important; }
* {
  box-sizing:border-box;
  -webkit-tap-highlight-color:transparent;
}
body {
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:linear-gradient(135deg,#0d5770,#1d86a4);
  min-height:100dvh;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:clamp(8px,2vw,32px);
  color:#222;
}
@font-face {
  font-family:OCR;
  src:url(ocraextended.ttf) format("truetype");
  font-display:swap;
}
.wrapper {
  position:relative;
  width:100%;
  max-width:var(--max-card-width);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:18px;
}
#ktp {
  position:relative;
  width:100%;
  aspect-ratio:600/600;
  background:url(assets/ktp_template_region.jpg) center/cover no-repeat;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 8px 32px -6px rgba(0,0,0,.4);
  touch-action:pan-y;
  user-select:none;
  will-change:transform;
  transition:transform .35s ease;
}
input {
  position:absolute;
  background:transparent;
  border:none;
  font:500 12px/1.15 Arial,Helvetica,sans-serif;
  text-transform:uppercase;
  color:#111;
  letter-spacing:.5px;
  padding:0;
  width:auto;
  max-width:55%;
  outline:none;
}
input:focus {
  outline:2px solid rgba(29,134,164,.35);
  outline-offset:2px;
  border-radius:2px;
}
.nik {
  font-family:OCR,Consolas,monospace;
  left:206px;
  top:201px;
  font-size: clamp(16px,2.3vw,22px);
  font-weight:600;
  color:#101010;
  letter-spacing:2.2px;
  text-shadow:0 1px 1px rgba(255,255,255,.4),0 0 2px rgba(0,0,0,.35);
}
.name { left:220px; top:233px; }
.region { left:220px; top:246px;}
.dob { left:300px; top:245px;}
.jenis { left:220px; top:260px;}
.golDarah { left:390px; top:257px;}
.alamat { left:220px; top:273px;}
.rt { left:220px; top:286px;}
.kel { left:220px; top:300px;}
.kec { left:220px; top:313px;}
.agama { left:220px; top:326px;}
.status { left:220px; top:338px;}
.pek { left:221px; top:351px;}
.kew { left:221px; top:365px;}
.ber { left:221px; top:378px;}
.province {
  font-family:OCR,Consolas,monospace;
  left:190px;
  top:165px;
  font-size: clamp(16px,2.1vw,20px);
  text-align:center;
  letter-spacing:1.2px;
  width:260px;
}
.regency {
  font-family:OCR,Consolas,monospace;
  left:190px;
  top:180px;
  font-size: clamp(16px,2.1vw,20px);
  text-align:center;
  letter-spacing:1.2px;
  width:260px;
}
.photoContainer {
  position:absolute;
  display:flex;
  flex-direction:column;
  align-items:center;
  left:422px;
  top:215px;
  transform:skew(0deg,-1.3deg);
}
.profileimg {
  height:135px;
  width:107px;
  object-fit:cover;
  filter:contrast(1.05) saturate(1.05);
  border-radius:4px;
  box-shadow:0 0 0 1px rgba(0,0,0,.25),0 4px 10px -2px rgba(0,0,0,.35);
}
.scaleBox {
  position:sticky;
  bottom:0;
  width:100%;
  max-width:var(--max-card-width);
  display:grid;
  grid-template-columns:minmax(0,1fr) auto;
  gap:14px;
  padding:14px clamp(12px,3vw,24px);
  background:var(--panel-bg);
  border:1px solid rgba(255,255,255,.35);
  backdrop-filter:blur(10px) saturate(1.4);
  -webkit-backdrop-filter:blur(10px) saturate(1.4);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  align-items:center;
}
.scaleBox .group {
  display:flex;
  flex-direction:column;
  gap:6px;
}
.scaleBox label {
  font-size:12px;
  font-weight:600;
  letter-spacing:.5px;
  color:#0d4763;
  text-transform:uppercase;
}
#scale {
  width:100%;
  appearance:none;
  height:8px;
  border-radius:4px;
  background:linear-gradient(90deg,#1d86a4,#46b8ce);
  outline:none;
}
#scale::-webkit-slider-thumb {
  -webkit-appearance:none;
  width:22px;
  height:22px;
  border-radius:50%;
  background:#fff;
  border:3px solid var(--accent);
  box-shadow:0 2px 6px rgba(0,0,0,.35);
  cursor:pointer;
  transition:transform .2s;
}
#scale:active::-webkit-slider-thumb { transform:scale(.9); }
.regenerateBtn {
  padding:14px 20px;
  min-width:160px;
  font-size:13px;
  font-weight:600;
  letter-spacing:.8px;
  border:none;
  background:linear-gradient(135deg,#11637a,#1d86a4 55%,#23a5c6);
  color:#fff;
  border-radius:10px;
  cursor:pointer;
  position:relative;
  overflow:hidden;
  transition:background .35s,transform .25s;
}
.regenerateBtn:focus-visible { outline:2px solid #fff; outline-offset:2px; }
.regenerateBtn:hover { background:linear-gradient(135deg,#0f5568,#187391 55%,#1d8aab); }
.regenerateBtn:active { transform:translateY(2px); }
.provinceInfo {
  position:relative;
  width:100%;
  max-width:var(--max-card-width);
  background:var(--panel-bg);
  padding:10px 18px;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  font-weight:600;
  display:flex;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
  font-size:13px;
  letter-spacing:.5px;
}
.provinceInfo .value {
  color:var(--accent);
  flex:1;
  text-align:right;
  font-weight:700;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
@media (max-width:820px) {
  #ktp {
    font-size:12px;
  }
  .scaleBox {
    grid-template-columns:1fr;
    gap:10px;
  }
  .regenerateBtn {
    width:100%;
  }
  .provinceInfo {
    flex-direction:column;
    align-items:flex-start;
  }
  .provinceInfo .value { text-align:left; white-space:normal; }
}
@media (max-width:520px) {
  body {
    padding:12px 8px 90px;
  }
  #ktp {
    aspect-ratio:3/3;
  }
  .nik { letter-spacing:1.6px; }
  .province,.regency { font-size:14px; }
}
@media (prefers-color-scheme:dark) {
  body { background:linear-gradient(135deg,#043243,#0d5266); color:#ddd; }
  .provinceInfo, .scaleBox { background:rgba(25,40,48,.85); color:#e2eef2; }
  .provinceInfo .value { color:#6fd3f0; }
  .regenerateBtn { background:linear-gradient(135deg,#0d607a,#1594b6); }
  .regenerateBtn:hover { background:linear-gradient(135deg,#0c5369,#1382a1); }
  input { color:#f5f8f9; text-shadow:none; }
  .nik { color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.6); }
}
.fade-in {
  animation:fade .6s ease;
}
@keyframes fade {
  from { opacity:0; transform:translateY(6px); }
  to { opacity:1; transform:translateY(0); }
}
</style>
</head>
<body>
<div class="wrapper">
  <div class="provinceInfo fade-in">
    <div class="label">Current Province & Regency</div>
    <div class="value" id="provinceDisplay">Loading...</div>
  </div>
  <div id="ktp" class="fade-in">
    <div class="photoContainer">
      <img class="profileimg" src="">
      <div class="shrtdisc">
        <input type="text" class="region2" value="">
        <br>
        <input type="text" class="tem" value="">
      </div>
    </div>
    <input type="text" class="province" value="">
    <input type="text" class="regency" value="">
    <input type="text" class="nik" value="" inputmode="numeric" autocomplete="off" spellcheck="false">
    <input type="text" class="name" value="">
    <input type="text" class="region">
    <input type="text" class="dob" value="">
    <input type="text" class="jenis" value="">
    <input type="text" class="golDarah" value="">
    <input type="text" class="alamat" value="">
    <input type="text" class="rt" value="">
    <input type="text" class="kel" value="">
    <input type="text" class="kec" value="">
    <input type="text" class="agama" value="">
    <input type="text" class="status" value="">
    <input type="text" class="pek" value="">
    <input type="text" class="kew" value="">
    <input type="text" class="ber" value="">
  </div>
  <div class="scaleBox fade-in">
    <div class="group">
      <label for="scale">Manual Scale</label>
      <input type="range" id="scale" min="0.55" max="2.2" step="0.01" value="1">
    </div>
    <button class="regenerateBtn" id="regenBtn" type="button">Generate New KTP</button>
  </div>
</div>
<script>
function randomIntFromInterval(min,max){
  return Math.floor(Math.random()*(max-min+1)+min);
}
function generateDOB(){
  const minTimestamp=Date.now()-(78*365*24*60*60*1000);
  const maxTimestamp=Date.now()-(18*365*24*60*60*1000);
  const randomTimestamp=Math.floor(Math.random()*(maxTimestamp-minTimestamp+1))+minTimestamp;
  return new Date(randomTimestamp);
}
function generateNIK(gender,provinceCode,regencyCode){
  const dobDate=generateDOB();
  const yy=dobDate.getFullYear().toString().slice(-2);
  const mm=String(dobDate.getMonth()+1).padStart(2,"0");
  const dd=String(dobDate.getDate()+(gender==="male"?0:40)).padStart(2,"0");
  const serial=Math.floor(Math.random()*10000).toString().padStart(4,"0");
  return { nik:`${provinceCode}${regencyCode}${dd}${mm}${yy}${serial}`, dob:dobDate };
}
function formatDate(date){
  return String(date.getDate()).padStart(2,"0")+"-"+String(date.getMonth()+1).padStart(2,"0")+"-"+date.getFullYear();
}
function getRandomBloodType(){
  const b=['A','B','AB','O'], r=['+','-'];
  return b[Math.floor(Math.random()*b.length)]+r[Math.floor(Math.random()*r.length)];
}
function getRandomReligion(){
  const list=["ISLAM","KRISTEN","KATOLIK","HINDU","BUDDHA","KHONGHUCU"];
  return list[Math.floor(Math.random()*list.length)];
}
function getRandomMaritalStatus(){
  const list=["BELUM KAWIN","KAWIN","CERAI HIDUP","CERAI MATI"];
  return list[Math.floor(Math.random()*list.length)];
}
function getRandomOccupation(){
  const o=["PEGAWAI NEGERI SIPIL","TNI","POLRI","PERDAGANGAN","PETANI/PEKEBUN","PETERNAK","NELAYAN/PERIKANAN","INDUSTRI","KONSTRUKSI","TRANSPORTASI","KARYAWAN SWASTA","KARYAWAN BUMN","KARYAWAN BUMD","KARYAWAN HONORER","BURUH HARIAN LEPAS","BURUH TANI/PERKEBUNAN","BURUH NELAYAN/PERIKANAN","BURUH PETERNAKAN","PEMBANTU RUMAH TANGGA","TUKANG CUKUR","TUKANG LISTRIK","TUKANG BATU","TUKANG KAYU","TUKANG SOL SEPATU","TUKANG LAS/PANDAI BESI","TUKANG JAHIT","TUKANG GIGI","PENATA RIAS","PENATA BUSANA","PENATA RAMBUT","MEKANIK","SENIMAN","TABIB","PARAJI","PERANCANG BUSANA","PENTERJEMAH","IMAM MASJID","PENDETA","PASTOR","WARTAWAN","USTADZ/MUBALIGH","JURU MASAK","PROMOTOR ACARA","ANGGOTA DPR-RI","ANGGOTA DPD","ANGGOTA BPK","PRESIDEN","WAKIL PRESIDEN","ANGGOTA MAHKAMAH KONSTITUSI","ANGGOTA KABINET KEMENTERIAN","DUTA BESAR","GUBERNUR","WAKIL GUBERNUR","BUPATI","WAKIL BUPATI","WALIKOTA","WAKIL WALIKOTA","ANGGOTA DPRD PROVINSI","ANGGOTA DPRD KABUPATEN/KOTA","DOSEN","GURU","PILOT","PENGACARA","NOTARIS","ARSITEK","AKUNTAN","KONSULTAN","DOKTER","BIDAN","PERAWAT","APOTEKER","PSIKIATER/PSIKOLOG","PELAJAR/MAHASISWA","MENGURUS RUMAH TANGGA","SUDAH TIDAK BEKERJA","BELUM/TIDAK BEKERJA"];
  return o[Math.floor(Math.random()*o.length)];
}
function sanitize(str){
  return String(str).replace(/[<>&"']/g,c=>({ '<':'&lt;','>':'&gt;','&':'&amp;','"':'&quot;',"'":'&#39;' }[c]));
}
function generateNewKTP(){
  try{
    if(typeof indonesiaProvinces==='undefined'||typeof userImages==='undefined'){
      document.getElementById("provinceDisplay").textContent="Data not loaded";
      return;
    }
    const province=getRandomProvince();
    const regency=getRandomRegency(province);
    const person=userImages[randomIntFromInterval(0,userImages.length-1)];
    const name=sanitize(getRandomIndonesianName()).toUpperCase();
    const address=sanitize(getRandomIndonesianAddress()).toUpperCase();
    const nikObj=generateNIK(person.gender,province.code,regency.code);
    document.getElementById("provinceDisplay").textContent=province.name+" - "+regency.name;
    document.querySelector(".profileimg").src="./"+person.source;
    document.querySelector(".nik").value=nikObj.nik;
    document.querySelector(".name").value=name;
    document.querySelector(".region").value="SINGARAJA,";
    document.querySelector(".dob").value=formatDate(nikObj.dob);
    document.querySelector(".jenis").value=person.gender==="male"?"LAKI-LAKI":"PEREMPUAN";
    document.querySelector(".golDarah").value=getRandomBloodType();
    document.querySelector(".alamat").value=address.substring(0,25);
    document.querySelector(".rt").value=String(Math.floor(Math.random()*20)+1).padStart(3,'0')+"/"+String(Math.floor(Math.random()*20)+1).padStart(3,'0');
    document.querySelector(".kel").value=regency.name.toUpperCase();
    document.querySelector(".kec").value=regency.name.toUpperCase();
    document.querySelector(".agama").value=getRandomReligion();
    document.querySelector(".status").value=getRandomMaritalStatus();
    document.querySelector(".pek").value=getRandomOccupation();
    document.querySelector(".kew").value="WNI";
    document.querySelector(".ber").value="SEUMUR HIDUP";
    document.querySelector(".province").value=province.name.toUpperCase();
    document.querySelector(".regency").value=regency.name.toUpperCase();
  }catch(e){
    document.getElementById("provinceDisplay").textContent="Error generating";
  }
}
function autoScaleCard(){
  const card=document.getElementById("ktp");
  const containerWidth=card.parentElement.clientWidth;
  const base=600;
  const fit=Math.min(containerWidth/base,1);
  if(!manualScaling) card.style.transform=`scale(${fit})`;
}
let manualScaling=false;
document.getElementById("scale").addEventListener("input",e=>{
  manualScaling=true;
  document.getElementById("ktp").style.transform=`scale(${e.target.value})`;
});
window.addEventListener("resize",()=>{
  if(!manualScaling) autoScaleCard();
});
document.getElementById("regenBtn").addEventListener("click",()=>{
  generateNewKTP();
  if(!manualScaling) autoScaleCard();
});
document.addEventListener("DOMContentLoaded",()=>{
  setTimeout(()=>{
    generateNewKTP();
    autoScaleCard();
  },120);
  const nikInput=document.querySelector(".nik");
  function strip(v){ return v.replace(/[^0-9]/g,""); }
  nikInput.addEventListener("input",e=>{
    const pos=e.target.selectionStart;
    const raw=e.target.value;
    const clean=strip(raw);
    if(raw!==clean){
      e.target.value=clean;
      const diff=raw.length-clean.length;
      e.target.setSelectionRange(pos-diff,pos-diff);
    }
  });
  nikInput.addEventListener("paste",e=>{
    e.preventDefault();
    const txt=(e.clipboardData||window.clipboardData).getData("text");
    const clean=strip(txt);
    const start=e.target.selectionStart;
    const end=e.target.selectionEnd;
    const cur=e.target.value;
    e.target.value=cur.slice(0,start)+clean+cur.slice(end);
    e.target.setSelectionRange(start+clean.length,start+clean.length);
  });
});
</script>
</body>
</html>